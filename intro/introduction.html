<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Why pyCompressor? &mdash; pyCompressor 1.1.0-dev documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Statistical Estimators" href="../theory/estimators.html" />
    <link rel="prev" title="pyCompressor" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> pyCompressor
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Why pyCompressor?</a></li>
<li class="toctree-l1"><a class="reference internal" href="#benchmarks">Benchmarks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Theory</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../theory/estimators.html">Statistical Estimators</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">HowTo</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../howto/howto.html">How to use</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howto/howto.html#pdf-grid-and-validation-plot">PDF grid and Validation plot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howto/howto.html#controlling-the-parallelization">Controlling the parallelization</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules/pycompressor/modules.html">pycompressor</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pyCompressor</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Why pyCompressor?</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/intro/introduction.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="why-pycompressor">
<h1>Why pyCompressor?<a class="headerlink" href="#why-pycompressor" title="Permalink to this heading"></a></h1>
<p>The <cite>pyCompressor</cite> package was designed in order to have a compression code that is flexible enough to
include various features that might improve the efficiency of the PDF compression strategy. The two new
main features of the <cite>pyCompressor</cite> package compared to the C++ implementation are:</p>
<blockquote>
<div><ul class="simple">
<li><p>A new minimization algoirthm, <strong>Covariance Matrix Adapation Strategy (CMA-ES)</strong>. In addition to the
<strong>Genetic Algorithm (GA)</strong>, there is now the possibility to choose as a minimizer the CMA-ES.</p></li>
<li><p>A <strong>Generative Adversarial (GANs) Strategy</strong> that can be used to enhance the statistices of the prior.
This relies on another python package called <cite>ganpdfs</cite> which is a standalone code based on tensorflow
designed specifically to learn the probability distribution of the a prior dataset (PDF replicas) and
generate new ones that follow the same distribution.</p></li>
</ul>
</div></blockquote>
<p>The new desing flow of the <cite>pyCompressor</cite> package is schematically described in the following diagram.</p>
<blockquote>
<div><figure class="align-center">
<img alt="../_images/flowchart.png" src="../_images/flowchart.png" />
</figure>
</div></blockquote>
<p>The prior Monte Carlo set of replica of size <span class="math notranslate nohighlight">\(N_p\)</span> is given as input from which a PDF grid of shape
<span class="math notranslate nohighlight">\((N_p, n_f, x_g)\)</span> (where <span class="math notranslate nohighlight">\(n_f\)</span> and <span class="math notranslate nohighlight">\(x_g\)</span> resp. denote the total number of flavors and the size of
the <span class="math notranslate nohighlight">\(x\)</span>-grid) is computed. If the choice to enhance the statistics is activated, the prior PDF set goes through
the GANs. This will generate a new (enhanced) Monte Carlo PDF set
<span class="math notranslate nohighlight">\(N_e\)</span> (with <span class="math notranslate nohighlight">\(N_e=Np+N_s\)</span> where <cite>N_s</cite> represents the size of the generated replicas). A subset sample
of the PDF replicas (prior or ehancend) with size <span class="math notranslate nohighlight">\(N_c\)</span> is then extracted in order to compute the Error Function
(ERF). The minimization of the ERF is then performed either using the GA or the CMA which can be defined in the input
runcard. The minimizer basically tries to find a candidate sample that leads to the smallest value of ERF. Once a
convergence is achieved after a given iteration, the agorithm stops and outputs a compressed Monte Carlo set of PDF
replicas with size <span class="math notranslate nohighlight">\(N_c\)</span> (with <span class="math notranslate nohighlight">\(N_c \ll N_p &lt; N_e\)</span>).</p>
</section>
<section id="benchmarks">
<h1>Benchmarks<a class="headerlink" href="#benchmarks" title="Permalink to this heading"></a></h1>
<p>The following benchmarks agains the C++ code is done without enhancing the statistics of the prior (i.e. truning
off the GANs). The input PDF set chosen here is the NNPDF31_nnlo_as_0118_1000 with 1000 replicas. The mahine used
for testing is a Ryzen 5 2600 (12 threads) with 16 GB of RAM.</p>
<blockquote>
<div><figure class="align-center">
<img alt="../_images/speed_benchmark.png" src="../_images/speed_benchmark.png" />
</figure>
</div></blockquote>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../index.html" class="btn btn-neutral float-left" title="pyCompressor" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../theory/estimators.html" class="btn btn-neutral float-right" title="Statistical Estimators" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Stefano Carrazza, Juan Cruz-Martinez, Tanjona R. Rabemananjara.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>